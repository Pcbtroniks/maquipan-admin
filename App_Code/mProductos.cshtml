@using System
@using System.Web
@using System.IO
@using System.Configuration
@using MySqlConnector


@helper getCategorias()
{

    using (MySqlConnection CONN = new MySqlConnection(ConfigurationManager.ConnectionStrings["SDNS"].ConnectionString))
    {
        CONN.Open();
        using (MySqlCommand CMD = new MySqlCommand("SELECT * FROM categorias ORDER BY nombre ASC", CONN))
        {
            using (MySqlDataReader DATOS = CMD.ExecuteReader())
            {
                while (DATOS.Read())
                {
                    <option value="@DATOS["nombre"]">@DATOS["nombre"]</option>
                }
            }
        }
    }
}

@functions{

    public static string getInfoCatart(string id, string columna)
    {
        string respuesta = "";

        try
        {
            using (var CONN = new MySqlConnection(ConfigurationManager.ConnectionStrings["SDNS"].ConnectionString))
            {
                CONN.Open();
                using (var CMD = new MySqlCommand("SELECT * FROM catart WHERE id = @varId LIMIT 1", CONN))
                {
                    CMD.Parameters.AddWithValue("@varId", id);
                    var DATOS = CMD.ExecuteReader();
                    while (DATOS.Read())
                    {
                        respuesta = DATOS[columna].ToString();
                    }
                }
            }
        }
        catch (MySqlException ex)
        {
            respuesta = ex.Message;

        }
        return respuesta;
    }


}